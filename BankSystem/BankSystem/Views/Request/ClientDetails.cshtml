@using BLL.Models.Enums
@model BLL.Models.RequestModel

@{
    ViewBag.Title = "Заявка";
}

<h2>Заявка</h2>
<div>
    @Html.ActionLink("Назад к заявкам", "ClientViewRequests")
    <label>Дата создания: @Model.Date</label>
    Статус заявки: @Model.StatusString
    @if (Model.Type == RequestType.Credit)
    {
        <p>Заявка на кредит: @Model.TypeName</p>
    }
    else if (Model.Type == RequestType.Deposit)
    {
        <p>Заявка на депозит: @Model.TypeName</p>
    }
    Заявленная сумма: @Model.Amount
    @if (Model.Comments != null && Model.Comments.Any())
    {
        <hr/>
        <p>Комментарии</p>
        foreach (var comment in Model.Comments.Where(c => !c.IsInternal))
        {
            <div class="well">
                <p>
                    @comment.AuthorName @comment.Date
                </p>
                <p>
                    @comment.Text
                </p>
            </div>
        }
    }
    @using (Html.BeginForm("LeaveComment", "Comment", new {requestId = Model.Id}, FormMethod.Post))
    {
        @Html.AntiForgeryToken()
        <p>Ваше сообщение</p>
        <textarea name="Text"></textarea>
        <button class="btn btn-success">Отправить</button>
    }
</div>