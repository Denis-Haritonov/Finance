@model BLL.Models.ViewModel.CurrencyModel
@{
    ViewBag.Title = "Курс валют";
}

<h2>Курс валют</h2>
<div>
    @Html.ActionLink("На главную", "Index", "Home")
</div>
<div role="tabpanel" class="tab-pane" id="currency">
    <div>
        USD @Model.MinDollarPrice / @Model.MaxDollarPrice
    </div>
    <div>
        EUR @Model.MinEuroPrice / @Model.AvrEuroPrice
    </div>
    <div>
        RUB @Model.MinEuroPrice / @Model.MaxEuroPrice
    </div>
    <div class="row">
        <div class="col-lg-2">
            <div class="input-group">
                <div class="form-group">
                    <select class="form-control" id="currency-1-name">
                        <option value="1">BYR</option>
                        <option value="@Model.AvrDollarPrice">USD</option>
                        <option value="@Model.AvrEuroPrice">EUR</option>
                        <option value="@Model.AvrRublePrice">RUB</option>
                    </select>
                </div>
                <input type="text" required class="form-control" id="currency-1">
            </div>
        </div>
        <div class="col-lg-2">
            <div class="input-group">
                <div class="input-group">
                    <div class="form-group">
                        <select class="form-control" id="currency-2-name">
                            <option value="@Model.AvrDollarPrice">USD</option>
                            <option value="1">BYR</option>
                            <option value="@Model.AvrEuroPrice">EUR</option>
                            <option value="@Model.AvrRublePrice">RUB</option>
                        </select>
                    </div>
                    <input type="text" readonly="readonly" class="form-control" id="currency-2">
                </div>
            </div>
        </div>
        <div class="col-lg-2" style="margin-top: 33px;">
            <span class="input-group-btn">
                <button class="btn btn-default" type="button" id="currency-btn">Посчитать</button>
            </span>
        </div>
    </div>
</div>

@section scripts
{
    <script type="text/javascript">
        $(document).ready(function() {
            $('#currency-btn').click(function() {
                var res = parseInt($('#currency-1').val()) * parseInt($('#currency-1-name').val()) / parseInt($('#currency-2-name').val());
                if (!isNaN(res) && isFinite(res)) {
                    $('#currency-2').val(res);
                }
            });
        });
    </script>
}
